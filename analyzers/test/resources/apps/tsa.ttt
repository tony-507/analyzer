// Perform basic stream analysis

global.outDir = $o | output;

input = #InputReader_1;

if $f;
    input.Source = _SOURCE_FILE;
    input.FileInput.Fname = $f;
end;

if $addr;
    input.Source = _SOURCE_UDP;
    input.UdpInput.Address = $addr;
    input.UdpInput.Itf = $itf;
end;

input.SkipCnt = $skipCnt | 0;
input.MaxInCnt = $maxInCnt | 0;
input.Protocols = TS;

demuxer = #TsDemuxer_1;
demuxer.Mode = $demuxMode | _DEMUX_FULL;

dh = #DataHandler_1;

link(input, demuxer);
link(demuxer, dh);